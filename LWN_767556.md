# LWN 767556 Mesa 在持續整合上的發展(Advances in Mesa continuous integration)

## Ongoing

translated by<`RanceJen`>

> Coutinuous integration (CI) has becomde increasingly prevalent in open-source projects over the last few years. Intel has been active in building CI system for graphics,both for kernel side and for mesa base user-space side of the equation.Mark Janes and Clayton Craft gave a presentation on Intel's Mesa CI system at the 2018 X.Org Developers Conference (XDC),whic was held in A Coruña,Spain in late September,The Mesa CI system is one of the successful CI initiatives in open source that he knowns of,Janes said.It is a core component of of Mesa development, especially at Intel.

最近幾年中持續整合(以下簡稱 CI) 在開源專案已經變得非常普遍及流行。Intel 也在建構圖像庫的 CI 系統上不管是在 kernel 或是 user space 的工程中都有所行動。 Mark Janes 和 Clayton Craft 在 2018 年九月底於 Coruña,Spain 舉辦的 XDC 中就發表了 Intel 的 Mesa CI 系統，Janes 說 Mesa CI 是一個成功的開源 CI 計畫，更是 Intel 在開發 Mesa 時的核心部份之一。

> 註：避免混淆特別說明一下，「Mesa」是一個 Intel 的圖像庫，而「Mesa CI」則是在開發 Mesa 時使用的 CI 系統

Like many companies, Intel is a large organization with an "old school development model". He likened it to a Roman army, where there are legions that are made up of smaller groups, each of which has procedures for all of its activities; tents are set up and arranged the same way each time. When Intel first encountered Mesa development, it was something of a shock. There were no architects in the group, but the Mesa developers were simply running right through the Intel army.

就像很多公司一樣，Intel 是一個使用舊時代開發方式的龐大組織。他將其比喻為羅馬軍隊，是一個由各個由不同小型團隊建構成的軍團，每個團隊有其自己做事的方式，卻在搭營時又用統一的方式安排。而當 Intel 第一次遇到 Mesa 的開發團隊時，這其實是一個文化衝擊。因為在這個團隊內雖然沒有架構師，但卻能在 Intel 的整個軍隊中保持流暢的運作。

There is a tendency to be smug and dismissive of the other parts of the companies that we work in, he said. He thinks it makes more sense to take the time to explain why the open-source methodology is superior. For 50 years, building software has been about differentiation and competing, but part of the open-source model is to collaborate with competitors. He thinks open-source has an unbeatable advantage, but it is still the underdog in many respects; it is "a lot of fun to be an underdog with an advantage", Janes said.

Janes 自認他們團隊的作法是比公司內其他團隊更為優秀的，他認為這值得進一步去闡述為何開源的方式是更加優秀的。他說從過往 50 年以來，建構軟體一直是在差異化和競爭，但開源專案的一部分其實是和競爭對手合作，他覺得開源專案具有無懈可擊的優勢，雖然不能避免的在其他面會有一些缺點的部份，作為一個具有無可擊敗優勢的弱者是很有趣的。

Technical details
He turned things over to Craft, who went over some of the technical details of the CI system. It has roughly 200 machines with full Intel hardware coverage going back to 2007. It runs multiple test suites, including piglit and the conformance test suites (CTS) for Vulkan, OpenGL, and OpenGLES. It does build tests of non-Intel platforms for Android as well. Each commit to the mainline kicks off millions of tests. Users can add their development branches to the CI system, as well, so that commits to those get tested before the code ever ends up in the mainline.

接著 Janes 將主持棒交給了 Craft，後者主要負責 CI 系統中的技術細節，他開始解釋 Mesa CI 有大概 200 台機器，硬體支援程度可回推到 2007 年，並執行多組套件測試，包含 Vulkan,OpenGL,OpenGLES 的一致性測試套件和 piglit，他同時也會在 Android 這種非 Intel 的平台上建置測試，每一個 commit 上到主線時都會啟動上百萬次測試，用戶也可以把他們的開發 branch 加到 CI 系統中，這樣在最終上到主線之前也可以進行測試。
